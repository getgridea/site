<template>
  <div class="home-page">
    <div class="hero-container">
      <css-doodle class="hero-bg">
        :doodle {
          @grid: 24 / 100vmax;
          background: #f9d654;
          font-family: sans-serif;
        }
        :after {
          content: \@hex(@rand(0x2500, 0x257f));
          color: rgba(67, 67, 67, 0.16);
          font-size: 2vmax;
        }
      </css-doodle>
      <div class="hero-content">
        <div class="left">
          <div class="slogon">ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯</div>
          <div class="description">è®°å½•ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„...</div>
          <div>
            <l-button size="large" type="primary" @click="goPage(`https://github.com/getgridea/gridea/releases/download/v${version}/Gridea-${version}.dmg`)">Gridea for Mac -ğ— {{ version }}</l-button>
            <l-button size="large" type="primary" @click="goPage(`https://github.com/getgridea/gridea/releases/download/v${version}/Gridea.Setup.${version}.exe`)">Gridea for Windows -ğ— {{ version }}</l-button>
          </div>
          <div class="star">
            <gh-btns-star slug="getgridea/gridea" show-count></gh-btns-star>
            <span class="star-tip">ğŸŒŸStar æ”¯æŒä½œè€…ï¼</span>
          </div>
          <div class="shields-container">
            <a href="https://github.com/getgridea/gridea/releases/latest">
              <img src="https://img.shields.io/github/release/getgridea/gridea.svg?style=flat-square" alt="">
            </a>

            <a href="https://github.com/getgridea/gridea/blob/master/LICENSE">
              <img src="https://img.shields.io/github/license/getgridea/gridea.svg?style=flat-square" alt="">
            </a>

            <a href="https://github.com/getgridea/gridea/releases/latest">
              <img alt="GitHub All Releases" src="https://img.shields.io/github/downloads/getgridea/gridea/total.svg?color=%2312b886&style=flat-square">
            </a>
          </div>
        </div>
        <div class="right">
          <img src="https://raw.githubusercontent.com/getgridea/gridea/develop/gridea-app.png" alt="Gridea" class="app-img">
        </div>
      </div>
    </div>
    <div class="container-wrapper">
      <div class="container">
        <h2 class="section-title">ä½ æœ€éœ€è¦çš„ï¼Œæˆ‘ä»¬éƒ½å‡†å¤‡äº†</h2>
        <div class="item-container">
          <div class="item" v-for="(item, index) in featureList" :key="index">
            <div class="title">{{ item.title }}</div>
            <div class="desc">{{ item.desc }}</div>
          </div>
        </div>
      </div>
    </div>
    <div class="container-wrapper white">
      <div class="container">
        <h2 class="section-title">ä¸æ­¢è¿™äº›</h2>
        <div class="content-container">
          é™¤äº†è¿™äº›ï¼Œè¿˜æœ‰ä¸€äº›ä½ å¯èƒ½æœŸå¾…çš„ï¼ˆä¸»é¢˜åŒ…å«ï¼‰ï¼šKatex å…¬å¼ã€Google Analyticsã€ç¤¾äº¤é“¾æ¥ã€TOC...ï¼Œå¿ƒåŠ¨äº†å—ï¼Ÿå¿«å¿«ä¸‹è½½ä½“éªŒå§ï¼
        </div>
        <div class="action-container">
          <l-button size="large" @click="goPage(`https://github.com/getgridea/gridea/releases/download/v${version}/Gridea-${version}.dmg`)">Gridea for Mac -ğ— {{ version }}</l-button>
          <l-button size="large" @click="goPage(`https://github.com/getgridea/gridea/releases/download/v${version}/Gridea.Setup.${version}.exe`)">Gridea for Windows -ğ— {{ version }}</l-button>
        </div>
        <div class="star-container">
          <div class="star-tip">ğŸŒŸStar æ”¯æŒä½œè€…ï¼ğŸ‘‡</div>
          <gh-btns-star slug="getgridea/gridea" show-count></gh-btns-star>
        </div>
      </div>
    </div>
    <div class="home-content">
      <p><span class="large-icon">ğŸŒ±</span> å½“ç„¶ Gridea è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ <span class="large-icon">ğŸƒ</span></p>
      <p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
      <p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
      <p>ğŸ˜˜ ğ–¤ğ—‡ğ—ƒğ—ˆğ—’~</p>
      <a href="https://t.me/joinchat/AAAAAEj82_lma0Y1wmyqUQ" target="_blank">Telegram é¢‘é“</a> |
      <a href="https://t.me/joinchat/IDY0ahRqb8NPodv95BNpBg" target="_blank">Telegram ç¾¤ç»„</a>
      <l-button type="text">QQ ç¾¤ï¼š970332209</l-button>
      <div class="shields-container">
        <a href="https://github.com/getgridea/gridea/releases/latest">
          <img src="https://img.shields.io/github/release/getgridea/gridea.svg?style=flat-square" alt="">
        </a>

        <a href="https://github.com/getgridea/gridea/blob/master/LICENSE">
          <img src="https://img.shields.io/github/license/getgridea/gridea.svg?style=flat-square" alt="">
        </a>

        <a href="https://github.com/getgridea/gridea/releases/latest">
          <img alt="GitHub All Releases" src="https://img.shields.io/github/downloads/getgridea/gridea/total.svg?color=%2312b886&style=flat-square">
        </a>
      </div>
    </div>
    <footer>
      <css-doodle class="footer-bg">
        :doodle {
          @grid: 6 / 100%;
        }
        @size: .8em;
        background: hsla(calc(10 * @index()), 60%, 60%, .2);
        clip-path: polygon( 50% 0, 100% 100%, 0 100%);
        transform:
          rotate(@rand(360deg))
          scale(@rand(.6, 1, .1))
          translate(
            @rand(-10em, 10em),
            @rand(-10em, 10em)
          )
      </css-doodle>
      Made with â¤ï¸ by <a href="https://github.com/EryouHao" target="_blank">EryouHao</a>
    </footer>
  </div>
</template>

<script>
import axios from 'axios'
import 'css-doodle'

export default {
  data() {
    return {
      stars: 0,
      version: '',
      featureList: [
        {
          title: 'Markdown',
          desc: 'ä½¿ç”¨æœ€é…·çš„ Markdown è¿›è¡Œåˆ›ä½œï¼Œä¸“æ³¨å†…å®¹ï¼Œå…¶ä»–çš„äº¤ç»™ Gridea',
        },
        {
          title: 'å°é¢å›¾',
          desc: 'å¿«å»ä¸ºæ–‡ç« æ­é…ä¸€å¼ ç²¾å¿ƒæŒ‘é€‰çš„å°é¢å›¾ï¼Œä¸ºæ–‡ç« æ·»å½©ï¼Œå¤–é“¾å›¾ä¹Ÿæ²¡é—®é¢˜å“¦',
        },
        {
          title: 'è‡ªå®šä¹‰æ ‡ç­¾',
          desc: 'ç”¨æ ‡ç­¾æ¥ä¸ºæ–‡ç« è¿›è¡Œå½’ç±»ï¼Œä»¥ä½ å–œæ¬¢çš„æ–¹å¼ï¼šç¼–ç¨‹ã€æ—…è¡Œã€è¯»ä¹¦ç¬”è®°...ï¼Œæ˜¯æ—¶å€™æŒ‰åˆ†ç±»æ¥æ•´ç†æ–‡ç« äº†',
        },
        {
          title: 'è‡ªå®šä¹‰èœå•',
          desc: 'æˆ‘ä»¬æä¾›äº†è‡ªå®šä¹‰èœå•åŠŸèƒ½ï¼ŒåŒæ—¶å€™é€‰èœå•ä¸­æä¾›äº†ä¸»é¡µã€å½’æ¡£å’Œæ ‡ç­¾åˆ—è¡¨å¿«æ·é€‰æ‹©ã€‚å½“ç„¶äº†ï¼Œä½ ä¹Ÿå¯ä»¥åˆ›å»ºå¤–éƒ¨èœå•åˆ°ä»»ä½•åœ°æ–¹',
        },
        {
          title: 'è·¨è®¾å¤‡',
          desc: 'æˆ–è®¸ä½ å·¥ä½œä½¿ç”¨ Macï¼Œç”Ÿæ´»ä½¿ç”¨ Windowsï¼Œè¿™éƒ½ä¸æ˜¯äº‹å„¿ï¼ŒGridea å…¨éƒ½æ”¯æŒï¼ä»€ä¹ˆï¼Œä½ å–œæ¬¢ç”¨ Linuxï¼Ÿå†ç­‰ç­‰ï¼Œç¨åå°±æ¥',
        },
        {
          title: 'å¤šå¹³å°',
          desc: 'å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½ ç”¨ Github Pages æ¥æ‰˜ç®¡åšå®¢å°±å¤Ÿäº†ï¼Œä½†æˆ‘ä»¬åŒæ—¶æä¾›äº† Coding Pages çš„æ”¯æŒ',
        },
        {
          title: 'å¤šè¯„è®º',
          desc: 'Gridea å†…ç½®äº† Gitalk å’Œ DisqusJS ä¸¤ä¸ªè¯„è®ºç³»ç»Ÿï¼Œä½ å¯ä»¥ä»»é€‰å…¶ä¸€ï¼Œåˆ©ç”¨è¯„è®ºç»“äº¤æ›´å¤šæœ‹å‹å§ï¼',
        },
        {
          title: 'å¤šä¸»é¢˜',
          desc: 'æˆ‘ä»¬ç›®å‰æä¾›äº† 4 æ¬¾å†…ç½®ä¸»é¢˜ï¼Œæ€»æœ‰ä¸€æ¬¾ä¼šè·å¾—ä½ çš„èŠ³å¿ƒï¼Œæ›´æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸ºæ¯æ¬¾ä¸»é¢˜æä¾›äº†ä¸°å¯Œçš„è‡ªå®šä¹‰é…ç½®ï¼Œç¨åŠ é…ç½®ï¼Œé‚‚é€…å¤§ä¸åŒ',
        },
        {
          title: 'å¤šè¯­è¨€',
          desc: 'æˆ‘ä»¬è´´å¿ƒåœ°ä¸ºæ‚¨å†…ç½®äº†ä¸­æ–‡ç®€ä½“å’Œ English ä¸¤ç§è¯­è¨€',
        },
      ],
    }
  },
  created() {
    this.fetchStars()
    this.fetchVersion()
  },
  methods: {
    goPage(url) {
      window.open(url, '_blank')
    },
    fetchStars() {
      axios.get('https://api.github.com/repos/getgridea/gridea').then((res) => {
        this.stars = res.data.stargazers_count
      })
    },
    async fetchVersion() {
      const res = await axios.get('https://api.github.com/repos/getgridea/gridea/releases/latest')
      if (res.status === 200) {
        this.version = res.data.name.substring(1)
      }
    },
  },
}
</script>

<style lang="stylus" scoped>
.home-page
  .description
    padding 16px 0 32px
  .action-container
    text-align center
  .home-content
    text-align center
    padding-bottom 32px
    .large-icon
      font-size 28px
  .star-container
    padding-top: 16px;
    text-align center
    .star-tip
      padding 16px 0
      font-weight bold
  .shields-container
    padding 24px 0
  >>> .gh-button-container
    float none
    margin 0

.hero-container
  overflow hidden
  position relative
  .hero-bg
    position absolute
    top 0
    right 0
    bottom 0
    left 0
    z-index -1
  .hero-content
    display flex
    justify-content space-between
    padding 80px
    .left
      width 38.2%
      display flex
      flex-direction column
      justify-content center
      .slogon
        font-size 40px
        color #000
        font-weight 600
      .description
        font-size 24px
      >>> .live-btn-primary
        background #434343
        transition all 0.382s
        &:hover
          box-shadow 0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04)!important
          transform translateY(-4px)
      .star
        padding 24px 0
        display flex
        align-items center
        font-weight bold

    .right
      width 61.8%
      display flex
      align-items center
      justify-content center
      .app-img
        width 100%

.section-title
  text-align center
  border-bottom none
.container-wrapper
  background #f9f7f3
  padding 32px
  &.white
    background #fff
.container
  max-width 1200px
  margin 48px auto
  .item-container
    display flex
    flex-wrap wrap
    justify-content center
    .item
      width 25%
      padding 16px
      margin 16px
      box-shadow 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px 0 rgba(0,0,0,.06)
      // border-radius 4px
      background #fff
      border-bottom-left-radius: 25px 115px;
      border-bottom-right-radius: 155px 25px;
      border-top-left-radius: 15px 225px;
      border-top-right-radius: 25px 150px;
      .title
        font-size 18px
        padding-bottom 16px
        font-weight bold
        color #000
      .desc
        line-height 1.5

.content-container
  text-align: center
  padding 32px
  line-height 1.5

.home-content
  padding 32px
footer
  padding: 48px 0;
  position: relative;
  overflow: hidden;
  text-align center

@media (max-width: 800px)
  .hero-container
    .hero-content
      flex-direction column
      padding 48px 32px
      .star
        flex-direction column-reverse
        .star-tip
          padding-bottom 16px
      .left, .right
        width 100%
        text-align center
      .left
        .slogon
          font-size 32px
        .description
          font-size 18px
        .live-btn-primary
          margin-bottom 8px

  .container
    margin 32px auto
    .item-container
      .item
        width 100%
        margin 16px 0
.content-container
  padding 16px 0 32px

</style>
